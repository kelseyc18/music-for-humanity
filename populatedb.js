#! /usr/bin/env node

console.log('This script populates your database. Specified database as argument - e.g.: populatedb mongodb://your_username:your_password@your_dabase_url');

//Get arguments passed on command line
var userArgs = process.argv.slice(2);
if (!userArgs[0].startsWith('mongodb://')) {
    console.log('ERROR: You need to specify a valid mongodb URL as the first argument');
    return
}

var async = require('async')
var Bass = require('./models/bass')
var Game = require('./models/game')
var Melody = require('./models/melody')
var Percussion = require('./models/percussion')
var Player = require('./models/player')
var Round = require('./models/round')
var Submission = require('./models/submission')


var mongoose = require('mongoose');
var mongoDB = userArgs[0];
mongoose.connect(mongoDB);
var db = mongoose.connection;
mongoose.connection.on('error', console.error.bind(console, 'MongoDB connection error:'));

var games = []
var bass_lines = []
var melody_lines = []
var percussion_lines = []
var players = []
var rounds = []
var submissions = []


function bassLineCreate(name, instrument, notesequence, notelength, cb) {
  var temp = name.split(" ");
  var image = temp[temp.length-1] + ".png";

  var bass = new Bass({ name:name, instrument:instrument, notesequence:notesequence, notelength:notelength, image:image });

  bass.save(function (err) {
    if (err) {
      cb(err, null)
      return
    }
    console.log('New Bass line: ' + bass);
    bass_lines.push(bass)
    cb(null, bass)
  }  );
}


function melodyLineCreate(name, raw_melody_line, cb) {
  var melody = new Melody({ name:raw_melody_line.name, instrument:raw_melody_line.instrument, notesequence:raw_melody_line.notesequence, image:raw_melody_line.name + '.png'});

  melody.save(function (err) {
    if (err) {
      cb(err, null)
      return
    }
    console.log('New Melody line: ' + melody);
    melody_lines.push(melody)
    cb(null, melody)
  }  );
}


function percussionLineCreate(name, instrument, notesequence, notelength, cb) {
  var temp = name.split(" ");
  var image = "perc" + temp[temp.length-1] + ".png";

  var percussion = new Percussion({ name:name, instrument:instrument, notesequence:notesequence, notelength:notelength, image:image });

  percussion.save(function (err) {
    if (err) {
      cb(err, null)
      return
    }
    console.log('New Percussion line: ' + percussion);
    percussion_lines.push(percussion)
    cb(null, percussion)
  }  );
}


function playerCreate(name, game, winCount, cb) {
  var player = new Player({ name:name, game:game, winCount:winCount });

  player.save(function (err) {
    if (err) {
      cb(err, null)
      return
    }
    console.log('New Player: ' + player);
    players.push(player)
    cb(null, player)
  });
}


function submissionCreate(player, melodyLines, bassLines, percussionLines, selectedMelody, selectedBass, selectedPercussion, isSubmitted, tempo, cb) {
  var submissiondetail = {
    player: player,
    melodyLines: melodyLines,
    bassLines: bassLines,
    percussionLines: percussionLines,
    isSubmitted: isSubmitted
  }
  if (selectedPercussion != false) submissiondetail.selectedPercussion = selectedPercussion;
  if (selectedMelody != false) submissiondetail.selectedMelody = selectedMelody;
  if (selectedBass != false) submissiondetail.selectedBass = selectedBass;
  if (tempo != false) submissiondetail.tempo = tempo;

  var submission = new Submission(submissiondetail);

  submission.save(function (err) {
    if (err) {
      cb(err, null)
      return
    }
    console.log('New Submission: ' + submission);
    submissions.push(submission)
    cb(null, submission)
  })
}


function roundCreate(roundNumber, videoId, submissions, winningSubmission, judge, cb) {
  var rounddetail = {
    roundNumber: roundNumber,
    videoId: videoId,
    submissions: submissions,
    judge: judge
  }
  if (winningSubmission != false) rounddetail.winningSubmission = winningSubmission;

  var round = new Round(rounddetail);

  round.save(function (err) {
    if (err) {
      cb(err, null);
      return;
    }
    console.log('New Round: ' + round);
    rounds.push(round)
    cb(null, round);
  }   );
}


function gameCreate(name, cb) {
  var game = new Game({ name:name, currentRound: null, rounds: [] });

  game.save(function (err) {
    if (err) {
      cb(err, null)
      return
    }
    console.log('New Game: ' + game);
    games.push(game)
    cb(null, game)
  }  );
}

/////////////////////////////////////////////////////////
///                  MELODY SELECTION                 ///
/////////////////////////////////////////////////////////

raw_melody_lines = [
  {'instrument': 1,
  'name': 'bumblebee',
  'notesequence': {59: [[9.75, 0.23541666666666666],
                        [11.75, 0.23541666666666666]],
                   60: [[9.5, 0.23541666666666666],
                        [11.5, 0.23541666666666666],
                        [13.0, 0.23541666666666666],
                        [15.0, 0.23541666666666666]],
                   61: [[8.75, 0.23541666666666666],
                        [9.25, 0.12291666666666666],
                        [10.75, 0.23541666666666666],
                        [11.25, 0.23541666666666666],
                        [12.75, 0.23541666666666666],
                        [14.75, 0.12291666666666666],
                        [15.25, 0.23541666666666666]],
                   62: [[8.5, 0.23541666666666666],
                        [9.0, 0.23541666666666666],
                        [10.5, 0.23541666666666666],
                        [11.0, 0.23541666666666666],
                        [12.5, 0.12291666666666666],
                        [14.5, 0.23541666666666666],
                        [15.5, 0.23541666666666666]],
                   63: [[8.25, 0.12291666666666666],
                        [10.25, 0.23541666666666666],
                        [12.25, 0.12291666666666666],
                        [13.75, 0.23541666666666666],
                        [14.25, 0.12291666666666666],
                        [15.8125, 0.175]],
                   64: [[8.0, 0.12291666666666666],
                        [10.0, 0.23541666666666666],
                        [12.0, 0.23541666666666666],
                        [13.5, 0.23541666666666666],
                        [14.0, 0.23541666666666666]],
                   65: [[7.75, 0.12291666666666666],
                        [13.25, 0.23541666666666666]],
                   66: [[7.5, 0.23541666666666666]],
                   67: [[7.25, 0.23541666666666666]],
                   68: [[7.0, 0.23541666666666666]],
                   69: [[6.75, 0.23541666666666666]],
                   70: [[6.5, 0.23541666666666666]],
                   71: [[5.75, 0.23541666666666666],
                        [6.25, 0.23541666666666666]],
                   72: [[5.5, 0.23541666666666666],
                        [6.0, 0.23541666666666666]],
                   73: [[4.75, 0.23541666666666666],
                        [5.25, 0.23541666666666666]],
                   74: [[4.5625, 0.175], [5.0, 0.12291666666666666]],
                   75: [[4.25, 0.23541666666666666]],
                   76: [[4.0, 0.23541666666666666]],
                   77: [[3.75, 0.23541666666666666]],
                   78: [[3.5, 0.23541666666666666]],
                   79: [[3.25, 0.23541666666666666]],
                   80: [[3.0, 0.23541666666666666]],
                   81: [[2.75, 0.12291666666666666]],
                   82: [[2.5, 0.23541666666666666]],
                   83: [[1.75, 0.23541666666666666],
                        [2.25, 0.23541666666666666]],
                   84: [[1.5, 0.23541666666666666],
                        [2.0, 0.23541666666666666]],
                   85: [[0.8, 0.09791666666666667],
                        [1.25, 0.23541666666666666]],
                   86: [[0.6, 0.1875], [1.0, 0.23541666666666666]],
                   87: [[0.4, 0.09791666666666667]],
                   88: [[0.0, 0.3770833333333333]]}},
 {'instrument': 1,
  'name': 'cantina',
  'notesequence': {57: [[6.75, 1.1854166666666666]],
                   60: [[5.25, 0.23541666666666666],
                        [6.0, 0.7104166666666667]],
                   61: [[5.75, 0.23541666666666666],
                        [13.25, 0.23541666666666666]],
                   62: [[4.75, 0.47291666666666665],
                        [5.5, 0.23541666666666666],
                        [12.0, 0.47291666666666665],
                        [12.5, 0.47291666666666665],
                        [13.5, 0.47291666666666665],
                        [15.25, 0.7104166666666667]],
                   63: [[3.25, 0.23541666666666666],
                        [4.25, 0.23541666666666666],
                        [11.25, 0.23541666666666666]],
                   64: [[0.0, 0.24791666666666667],
                        [1.0, 0.24791666666666667],
                        [2.0, 0.23541666666666666],
                        [2.75, 0.47291666666666665],
                        [3.5, 0.47291666666666665],
                        [4.0, 0.23541666666666666],
                        [4.5, 0.23541666666666666],
                        [8.0, 0.24791666666666667],
                        [9.0, 0.24791666666666667],
                        [10.0, 0.23541666666666666],
                        [10.75, 0.47291666666666665],
                        [11.5, 0.47291666666666665],
                        [14.75, 0.47291666666666665]],
                   65: [[14.25, 0.47291666666666665]],
                   67: [[14.0, 0.23541666666666666]],
                   69: [[0.5, 0.24791666666666667],
                        [1.5, 0.24791666666666667],
                        [2.25, 0.47291666666666665],
                        [8.5, 0.24791666666666667],
                        [9.5, 0.24791666666666667],
                        [10.25, 0.47291666666666665]]}},
 {'instrument': 56,
  'name': 'hedwig',
  'notesequence': {52: [[12.0, 3.7979166666666666]],
                   55: [[10.0, 1.2645833333333334]],
                   57: [[0.0, 0.9479166666666666],
                        [2.0, 1.2645833333333334],
                        [8.0, 0.9479166666666666]],
                   58: [[11.333333333333334, 0.63125]],
                   59: [[1.3333333333333333, 0.63125],
                        [6.0, 1.8979166666666667],
                        [9.333333333333334, 0.63125]],
                   60: [[1.0, 0.3145833333333333],
                        [9.0, 0.3145833333333333]],
                   62: [[4.0, 1.8979166666666667]],
                   64: [[3.3333333333333335, 0.63125]]}},
 {'instrument': 73,
  'name': 'hedwig2',
  'notesequence': {58: [[12.0, 0.9479166666666666]],
                   59: [[11.0, 0.9479166666666666]],
                   62: [[13.0, 0.47291666666666665]],
                   65: [[7.0, 0.9479166666666666],
                        [13.5, 0.47291666666666665]],
                   66: [[9.5, 0.47291666666666665]],
                   67: [[8.0, 0.9479166666666666],
                        [9.0, 0.47291666666666665],
                        [10.0, 0.9479166666666666]],
                   68: [[3.0, 0.47291666666666665],
                        [5.5, 0.47291666666666665],
                        [14.0, 1.8979166666666667]],
                   69: [[0.0, 0.47291666666666665],
                        [0.5, 0.47291666666666665],
                        [1.0, 0.47291666666666665],
                        [1.5, 0.47291666666666665],
                        [2.0, 0.47291666666666665],
                        [2.5, 0.47291666666666665],
                        [3.5, 0.47291666666666665],
                        [5.0, 0.47291666666666665],
                        [6.0, 0.9479166666666666]],
                   70: [[4.0, 0.9479166666666666]]}},
 {'instrument': 60,
  'name': 'imperialmarch',
  'notesequence': {65: [[3.0, 0.7104166666666667],
                        [5.0, 0.7104166666666667],
                        [13.0, 0.7104166666666667]],
                   68: [[12.0, 0.9479166666666666]],
                   69: [[0.0, 0.9479166666666666],
                        [1.0, 0.9479166666666666],
                        [2.0, 0.9479166666666666],
                        [4.0, 0.9479166666666666],
                        [6.0, 1.8979166666666667],
                        [14.0, 1.8979166666666667]],
                   72: [[3.75, 0.23541666666666666],
                        [5.75, 0.23541666666666666],
                        [11.75, 0.23541666666666666],
                        [13.75, 0.23541666666666666]],
                   76: [[8.0, 0.9479166666666666],
                        [9.0, 0.9479166666666666],
                        [10.0, 0.9479166666666666]],
                   77: [[11.0, 0.7104166666666667]]}},
 {'instrument': 40,
  'name': 'inception',
  'notesequence': {62: [[12.75, 0.23541666666666666],
                        [13.75, 0.23541666666666666],
                        [14.75, 0.23541666666666666],
                        [15.75, 0.23541666666666666]],
                   64: [[0.75, 0.23541666666666666],
                        [1.75, 0.23541666666666666],
                        [2.75, 0.23541666666666666],
                        [3.75, 0.23541666666666666],
                        [8.75, 0.23541666666666666],
                        [9.75, 0.23541666666666666],
                        [10.75, 0.23541666666666666],
                        [11.75, 0.23541666666666666]],
                   67: [[4.75, 0.23541666666666666],
                        [5.75, 0.23541666666666666],
                        [6.75, 0.23541666666666666],
                        [7.75, 0.23541666666666666],
                        [13.0, 0.23541666666666666],
                        [14.0, 0.23541666666666666],
                        [15.0, 0.23541666666666666]],
                   69: [[1.0, 0.23541666666666666],
                        [2.0, 0.23541666666666666],
                        [3.0, 0.23541666666666666],
                        [5.0, 0.23541666666666666],
                        [6.0, 0.23541666666666666],
                        [7.0, 0.23541666666666666],
                        [9.0, 0.23541666666666666],
                        [10.0, 0.23541666666666666],
                        [11.0, 0.23541666666666666],
                        [12.25, 0.23541666666666666],
                        [12.5, 0.23541666666666666],
                        [13.25, 0.23541666666666666],
                        [13.5, 0.23541666666666666],
                        [14.25, 0.23541666666666666],
                        [14.5, 0.23541666666666666],
                        [15.25, 0.23541666666666666],
                        [15.5, 0.23541666666666666]],
                   71: [[0.25, 0.23541666666666666],
                        [0.5, 0.23541666666666666],
                        [1.25, 0.23541666666666666],
                        [1.5, 0.23541666666666666],
                        [2.25, 0.23541666666666666],
                        [2.5, 0.23541666666666666],
                        [3.25, 0.23541666666666666],
                        [3.5, 0.23541666666666666],
                        [4.25, 0.23541666666666666],
                        [4.5, 0.23541666666666666],
                        [5.25, 0.23541666666666666],
                        [5.5, 0.23541666666666666],
                        [6.25, 0.23541666666666666],
                        [6.5, 0.23541666666666666],
                        [7.25, 0.23541666666666666],
                        [7.5, 0.23541666666666666],
                        [8.0, 0.23541666666666666],
                        [8.25, 0.23541666666666666],
                        [8.5, 0.23541666666666666],
                        [9.25, 0.23541666666666666],
                        [9.5, 0.23541666666666666],
                        [10.25, 0.23541666666666666],
                        [10.5, 0.23541666666666666],
                        [11.25, 0.23541666666666666],
                        [11.5, 0.23541666666666666]],
                   72: [[0.0, 0.23541666666666666]],
                   78: [[12.0, 0.23541666666666666]],
                   83: [[4.0, 0.23541666666666666]]}},
 {'instrument': 40,
  'name': 'inception2',
  'notesequence': {62: [[10.0, 0.47291666666666665]],
                   67: [[13.0, 0.23541666666666666],
                        [14.0, 0.23541666666666666],
                        [15.0, 0.23541666666666666]],
                   69: [[2.0, 0.47291666666666665],
                        [5.0, 0.23541666666666666],
                        [6.0, 0.23541666666666666],
                        [7.0, 0.23541666666666666],
                        [9.0, 0.47291666666666665],
                        [12.5, 0.47291666666666665],
                        [13.25, 0.23541666666666666],
                        [13.5, 0.47291666666666665],
                        [14.25, 0.23541666666666666],
                        [14.5, 0.47291666666666665],
                        [15.25, 0.23541666666666666],
                        [15.5, 0.47291666666666665]],
                   71: [[0.5, 0.47291666666666665],
                        [1.0, 0.47291666666666665],
                        [1.5, 0.47291666666666665],
                        [2.5, 0.47291666666666665],
                        [3.5, 0.47291666666666665],
                        [4.5, 0.47291666666666665],
                        [5.25, 0.23541666666666666],
                        [5.5, 0.47291666666666665],
                        [6.25, 0.23541666666666666],
                        [6.5, 0.47291666666666665],
                        [7.25, 0.23541666666666666],
                        [7.5, 0.47291666666666665],
                        [8.0, 0.47291666666666665],
                        [8.5, 0.47291666666666665],
                        [9.5, 0.47291666666666665],
                        [10.5, 0.47291666666666665],
                        [11.5, 0.47291666666666665]],
                   72: [[0.0, 0.47291666666666665]],
                   76: [[11.0, 0.47291666666666665]],
                   78: [[3.0, 0.47291666666666665],
                        [12.0, 0.47291666666666665]],
                   79: [[4.0, 0.47291666666666665]]}},
 {'instrument': 1,
  'name': 'riverflowsinyou',
  'notesequence': {72: [[7.5, 0.23541666666666666],
                        [15.5, 0.23541666666666666]],
                   76: [[7.75, 0.23541666666666666],
                        [15.75, 0.23541666666666666]],
                   77: [[3.5, 3.7979166666666666],
                        [11.5, 3.7979166666666666]],
                   79: [[2.5, 0.47291666666666665],
                        [10.5, 0.47291666666666665]],
                   83: [[0.5, 0.47291666666666665],
                        [1.5, 0.47291666666666665],
                        [8.5, 0.47291666666666665],
                        [9.5, 0.47291666666666665]],
                   84: [[0.0, 0.47291666666666665],
                        [1.0, 0.47291666666666665],
                        [2.0, 0.47291666666666665],
                        [3.0, 0.47291666666666665],
                        [8.0, 0.47291666666666665],
                        [9.0, 0.47291666666666665],
                        [10.0, 0.47291666666666665],
                        [11.0, 0.47291666666666665]]}},
 {'instrument': 11,
  'name': 'shelter',
  'notesequence': {60: [[0.0, 0.9479166666666666],
                        [2.0, 1.8979166666666667],
                        [4.0, 0.9479166666666666],
                        [7.5, 0.47291666666666665],
                        [8.0, 0.9479166666666666],
                        [10.0, 1.4229166666666666],
                        [12.333333333333334, 0.3145833333333333],
                        [13.333333333333334, 0.3145833333333333],
                        [14.333333333333334, 0.3145833333333333],
                        [15.333333333333334, 0.3145833333333333]],
                   62: [[6.0, 0.9479166666666666],
                        [7.0, 0.47291666666666665],
                        [12.666666666666666, 0.3145833333333333],
                        [13.666666666666666, 0.3145833333333333],
                        [14.666666666666666, 0.3145833333333333],
                        [15.666666666666666, 0.3145833333333333]],
                   64: [[11.5, 0.47291666666666665],
                        [12.0, 0.3145833333333333],
                        [13.0, 0.3145833333333333],
                        [14.0, 0.3145833333333333],
                        [15.0, 0.3145833333333333]],
                   67: [[1.25, 0.7104166666666667],
                        [5.25, 0.7104166666666667],
                        [9.25, 0.7104166666666667]],
                   69: [[1.0, 0.23541666666666666],
                        [5.0, 0.23541666666666666],
                        [9.0, 0.23541666666666666]]}},
 {'instrument': 1,
  'name': 'sherlock',
  'notesequence': {69: [[2.0, 0.11666666666666667],
                        [2.125, 0.11666666666666667],
                        [2.25, 0.11666666666666667],
                        [2.375, 0.11666666666666667],
                        [2.5, 0.11666666666666667],
                        [2.625, 0.11666666666666667],
                        [2.75, 0.11666666666666667],
                        [2.875, 0.11666666666666667],
                        [3.0, 0.11666666666666667],
                        [3.125, 0.11666666666666667],
                        [3.25, 0.11666666666666667],
                        [3.375, 0.11666666666666667],
                        [10.0, 0.11666666666666667],
                        [10.125, 0.11666666666666667],
                        [10.25, 0.11666666666666667],
                        [10.375, 0.11666666666666667],
                        [10.5, 0.11666666666666667],
                        [10.625, 0.11666666666666667],
                        [10.75, 0.11666666666666667],
                        [10.875, 0.11666666666666667],
                        [11.0, 0.11666666666666667],
                        [11.125, 0.11666666666666667],
                        [11.25, 0.11666666666666667],
                        [11.375, 0.11666666666666667]],
                   71: [[6.0, 0.11666666666666667],
                        [6.125, 0.11666666666666667],
                        [6.25, 0.11666666666666667],
                        [6.375, 0.11666666666666667],
                        [6.5, 0.11666666666666667],
                        [6.625, 0.11666666666666667],
                        [6.75, 0.11666666666666667],
                        [6.875, 0.11666666666666667],
                        [7.0, 0.11666666666666667],
                        [7.125, 0.11666666666666667],
                        [7.25, 0.11666666666666667],
                        [7.375, 0.11666666666666667],
                        [14.0, 0.11666666666666667],
                        [14.125, 0.11666666666666667],
                        [14.25, 0.11666666666666667],
                        [14.375, 0.11666666666666667],
                        [14.5, 0.11666666666666667],
                        [14.625, 0.11666666666666667],
                        [14.75, 0.11666666666666667],
                        [14.875, 0.11666666666666667],
                        [15.0, 0.11666666666666667],
                        [15.125, 0.11666666666666667],
                        [15.25, 0.11666666666666667],
                        [15.375, 0.11666666666666667]],
                   77: [[4.875, 0.11666666666666667],
                        [12.875, 0.11666666666666667]],
                   80: [[0.875, 0.11666666666666667],
                        [8.875, 0.11666666666666667]],
                   81: [[0.0, 0.47291666666666665],
                        [0.5, 0.3541666666666667],
                        [1.0, 0.4979166666666667],
                        [8.0, 0.47291666666666665],
                        [8.5, 0.3541666666666667],
                        [9.0, 0.4979166666666667]],
                   82: [[3.875, 0.11666666666666667],
                        [11.875, 0.11666666666666667]],
                   83: [[4.0, 0.47291666666666665],
                        [4.5, 0.3541666666666667],
                        [5.0, 0.4979166666666667],
                        [12.0, 0.47291666666666665],
                        [12.5, 0.3541666666666667],
                        [13.0, 0.4979166666666667]],
                   84: [[7.875, 0.11666666666666667],
                        [15.875, 0.11666666666666667]]}},
 {'instrument': 56,
  'name': 'starwars',
  'notesequence': {55: [[15.0, 0.3145833333333333],
                        [15.333333333333334, 0.3145833333333333],
                        [15.666666666666666, 0.3145833333333333]],
                   60: [[0.0, 1.8979166666666667]],
                   62: [[3.6666666666666665, 0.3145833333333333],
                        [7.666666666666667, 0.3145833333333333],
                        [12.0, 2.847916666666667]],
                   64: [[3.3333333333333335, 0.3145833333333333],
                        [7.333333333333333, 0.3145833333333333],
                        [11.333333333333334, 0.3145833333333333]],
                   65: [[3.0, 0.3145833333333333],
                        [7.0, 0.3145833333333333],
                        [11.0, 0.3145833333333333],
                        [11.666666666666666, 0.3145833333333333]],
                   67: [[2.0, 0.9479166666666666],
                        [6.0, 0.9479166666666666],
                        [10.0, 0.9479166666666666]],
                   72: [[4.0, 1.8979166666666667],
                        [8.0, 1.8979166666666667]]}},
 {'instrument': 1,
  'name': 'umbridge',
  'notesequence': {57: [[1.0, 0.3729166666666667],
                        [1.75, 0.12291666666666666],
                        [3.0, 0.3729166666666667],
                        [3.75, 0.12291666666666666],
                        [5.0, 0.3729166666666667],
                        [5.75, 0.12291666666666666],
                        [7.0, 0.3729166666666667],
                        [7.75, 0.12291666666666666],
                        [9.0, 0.3729166666666667],
                        [9.75, 0.12291666666666666],
                        [11.0, 0.3729166666666667],
                        [11.75, 0.12291666666666666],
                        [13.0, 0.3729166666666667],
                        [13.75, 0.12291666666666666],
                        [15.0, 0.3729166666666667],
                        [15.75, 0.12291666666666666]],
                   63: [[8.0, 0.3729166666666667],
                        [8.75, 0.12291666666666666],
                        [12.0, 0.3729166666666667],
                        [12.75, 0.12291666666666666]],
                   64: [[6.0, 0.3729166666666667],
                        [6.75, 0.12291666666666666],
                        [10.0, 0.3729166666666667],
                        [10.75, 0.12291666666666666],
                        [14.0, 0.3729166666666667],
                        [14.75, 0.12291666666666666]],
                   65: [[4.0, 0.3729166666666667],
                        [4.75, 0.12291666666666666]],
                   67: [[2.0, 0.3729166666666667],
                        [2.75, 0.12291666666666666]],
                   69: [[0.0, 0.3729166666666667],
                        [0.75, 0.12291666666666666]]}},
 {'instrument': 1,
  'name': 'umbridge2',
  'notesequence': {61: [[0.75, 0.12291666666666666]],
                   62: [[0.0, 0.3729166666666667],
                        [1.0, 0.3729166666666667]],
                   63: [[15.0, 0.47291666666666665]],
                   64: [[1.75, 0.12291666666666666],
                        [4.75, 0.12291666666666666]],
                   65: [[2.0, 1.8979166666666667],
                        [4.0, 0.3729166666666667],
                        [5.0, 0.3729166666666667]],
                   66: [[14.0, 0.47291666666666665]],
                   67: [[5.75, 0.12291666666666666]],
                   68: [[8.75, 0.12291666666666666]],
                   69: [[6.0, 1.8979166666666667],
                        [8.0, 0.3729166666666667],
                        [9.0, 0.3729166666666667]],
                   71: [[9.75, 0.12291666666666666],
                        [10.75, 0.12291666666666666],
                        [13.0, 0.47291666666666665]],
                   72: [[10.0, 0.3729166666666667],
                        [11.0, 0.3729166666666667]],
                   74: [[11.75, 0.12291666666666666]],
                   75: [[12.0, 0.47291666666666665]]}},
 {'instrument': 1,
  'name': 'up',
  'notesequence': {67: [[6.0, 0.9479166666666666]],
                   69: [[4.0, 0.63125],
                        [5.0, 0.3145833333333333],
                        [5.666666666666667, 0.3145833333333333],
                        [7.666666666666667, 0.3145833333333333],
                        [9.666666666666666, 0.3145833333333333],
                        [12.0, 1.8979166666666667]],
                   71: [[0.0, 2.53125]],
                   72: [[3.0, 0.3145833333333333],
                        [3.6666666666666665, 0.3145833333333333],
                        [5.333333333333333, 0.3145833333333333],
                        [11.333333333333334, 0.63125],
                        [15.0, 0.3145833333333333],
                        [15.666666666666666, 0.3145833333333333]],
                   74: [[8.666666666666666, 0.9479166666666666],
                        [10.666666666666666, 0.63125]],
                   76: [[3.3333333333333335, 0.3145833333333333],
                        [8.0, 0.63125],
                        [10.0, 0.63125],
                        [15.333333333333334, 0.3145833333333333]]}}]

/////////////////////////////////////////////////////////
///                   BASS SELECTION                  ///
/////////////////////////////////////////////////////////

var bass_instrument_0 = 34
var bass_times_0 = {36: [0.0, 12.0], 40: [1.0, 13.0], 41: [4.0], 43: [2.0, 8.0, 14.0], 45: [5.0], 47.0: [9.0], 48.0: [3.0, 6.0, 15.0], 50.0: [10.0], 53.0: [7.0], 55.0: [11.0]}
var bass_dur_0 = 0.9
var bass_instrument_1 = 34
var bass_times_1 = {36: [0.0, 6.0, 8.0, 14.0], 40: [0.5, 6.5, 8.5, 14.5], 41: [2.0, 10.0], 43: [1.0, 4.0, 7.0, 9.0, 12.0, 15.0], 45: [2.5, 10.5], 47.0: [4.5, 12.5], 48.0: [1.5, 3.0, 7.5, 9.5, 11.0, 15.5], 50.0: [5.0, 13.0], 53.0: [3.5, 11.5], 55.0: [5.5, 13.5]}
var bass_dur_1 = 0.4
var bass_instrument_2 = 34
var bass_times_2 = {36: [0.0, 12.0], 40: [2.0, 14.0], 41: [4.0], 43: [3.0, 8.0, 15.0], 45: [6.0], 47.0: [10.0], 48.0: [1.0, 7.0, 13.0], 50.0: [11.0], 53.0: [5.0], 55.0: [9.0]}
var bass_dur_2 = 0.9
var bass_instrument_3 = 34
var bass_times_3 = {36: [0.0, 6.0, 8.0, 14.0], 40: [1.0, 7.0, 9.0, 15.0], 41: [2.0, 10.0], 43: [1.5, 4.0, 7.5, 9.5, 12.0, 15.5], 45: [3.0, 11.0], 47.0: [5.0, 13.0], 48.0: [0.5, 3.5, 6.5, 8.5, 11.5, 14.5], 50.0: [5.5, 13.5], 53.0: [2.5, 10.5], 55.0: [4.5, 12.5]}
var bass_dur_3 = 0.4
var bass_instrument_4 = 34
var bass_times_4 = {36: [0.0, 12.0], 40: [2.0, 14.0], 41: [4.0], 43: [1.0, 3.0, 8.0, 13.0, 15.0], 45: [6.0], 47.0: [10.0], 48.0: [5.0, 7.0], 50.0: [9.0, 11.0]}
var bass_dur_4 = 0.9
var bass_instrument_5 = 34
var bass_times_5 = {36: [0.0, 6.0, 8.0, 14.0], 40: [1.0, 7.0, 9.0, 15.0], 41: [2.0, 10.0], 43: [0.5, 1.5, 4.0, 6.5, 7.5, 8.5, 9.5, 12.0, 14.5, 15.5], 45: [3.0, 11.0], 47.0: [5.0, 13.0], 48.0: [2.5, 3.5, 10.5, 11.5], 50.0: [4.5, 5.5, 12.5, 13.5]}
var bass_dur_5 = 0.4
var bass_instrument_6 = 34
var bass_times_6 = {38: [4.0, 8.0], 41: [5.0, 9.0], 45: [0.0, 6.0, 10.0, 12.0], 48.0: [1.0, 13.0], 50.0: [7.0, 11.0], 52.0: [2.0, 14.0], 57.0: [3.0, 15.0]}
var bass_dur_6 = 0.9
var bass_instrument_7 = 34
var bass_times_7 = {38: [2.0, 4.0, 10.0, 12.0], 41: [2.5, 4.5, 10.5, 12.5], 45: [0.0, 3.0, 5.0, 6.0, 8.0, 11.0, 13.0, 14.0], 48.0: [0.5, 6.5, 8.5, 14.5], 50.0: [3.5, 5.5, 11.5, 13.5], 52.0: [1.0, 7.0, 9.0, 15.0], 57.0: [1.5, 7.5, 9.5, 15.5]}
var bass_dur_7 = 0.4
var bass_instrument_8 = 34
var bass_times_8 = {38: [4.0, 8.0], 41: [6.0, 10.0], 45: [0.0, 7.0, 11.0, 12.0], 48.0: [2.0, 14.0], 50.0: [5.0, 9.0], 52.0: [3.0, 15.0], 57.0: [1.0, 13.0]}
var bass_dur_8 = 0.9
var bass_instrument_9 = 34
var bass_times_9 = {38: [2.0, 4.0, 10.0, 12.0], 41: [3.0, 5.0, 11.0, 13.0], 45: [0.0, 3.5, 5.5, 6.0, 8.0, 11.5, 13.5, 14.0], 48.0: [1.0, 7.0, 9.0, 15.0], 50.0: [2.5, 4.5, 10.5, 12.5], 52.0: [1.5, 7.5, 9.5, 15.5], 57.0: [0.5, 6.5, 8.5, 14.5]}
var bass_dur_9 = 0.4
var bass_instrument_10 = 34
var bass_times_10 = {48.0: [2.0, 14.0], 41: [6.0, 10.0], 52.0: [1.0, 3.0, 13.0, 15.0], 45: [0.0, 5.0, 7.0, 9.0, 11.0, 12.0], 38: [4.0, 8.0]}
var bass_dur_10 = 0.9
var bass_instrument_11 = 34
var bass_times_11 = {48.0: [1.0, 7.0, 9.0, 15.0], 41: [3.0, 5.0, 11.0, 13.0], 52.0: [0.5, 1.5, 6.5, 7.5, 8.5, 9.5, 14.5, 15.5], 45: [0.0, 2.5, 3.5, 4.5, 5.5, 6.0, 8.0, 10.5, 11.5, 12.5, 13.5, 14.0], 38: [2.0, 4.0, 10.0, 12.0]}
var bass_dur_11 = 0.4
var bass_instrument_12 = 34
var bass_times_12 = {36: [0.0, 4.0, 12.0], 40: [1.0, 5.0, 13.0], 41: [8.0], 43: [2.0, 6.0, 14.0], 45: [9.0], 48.0: [3.0, 7.0, 10.0, 15.0], 53.0: [11.0]}
var bass_dur_12 = 0.9
var bass_instrument_13 = 34
var bass_times_13 = {36: [0.0, 2.0, 6.0, 8.0, 10.0, 14.0], 40: [0.5, 2.5, 6.5, 8.5, 10.5, 14.5], 41: [4.0, 12.0], 43: [1.0, 3.0, 7.0, 9.0, 11.0, 15.0], 45: [4.5, 12.5], 48.0: [1.5, 3.5, 5.0, 7.5, 9.5, 11.5, 13.0, 15.5], 53.0: [5.5, 13.5]}
var bass_dur_13 = 0.4
var bass_instrument_14 = 34
var bass_times_14 = {36: [0.0, 4.0, 12.0], 40: [2.0, 6.0, 14.0], 41: [8.0], 43: [3.0, 7.0, 15.0], 45: [10.0], 48.0: [1.0, 5.0, 11.0, 13.0], 53.0: [9.0]}
var bass_dur_14 = 0.9
var bass_instrument_15 = 34
var bass_times_15 = {36: [0.0, 2.0, 6.0, 8.0, 10.0, 14.0], 40: [1.0, 3.0, 7.0, 9.0, 11.0, 15.0], 41: [4.0, 12.0], 43: [1.5, 3.5, 7.5, 9.5, 11.5, 15.5], 45: [5.0, 13.0], 48.0: [0.5, 2.5, 5.5, 6.5, 8.5, 10.5, 13.5, 14.5], 53.0: [4.5, 12.5]}
var bass_dur_15 = 0.4
var bass_instrument_16 = 34
var bass_times_16 = {36: [0.0, 4.0, 12.0], 40: [2.0, 6.0, 14.0], 41: [8.0], 43: [1.0, 3.0, 5.0, 7.0, 13.0, 15.0], 45: [10.0], 48.0: [9.0, 11.0]}
var bass_dur_16 = 0.9
var bass_instrument_17 = 34
var bass_times_17 = {36: [0.0, 2.0, 6.0, 8.0, 10.0, 14.0], 40: [1.0, 3.0, 7.0, 9.0, 11.0, 15.0], 41: [4.0, 12.0], 43: [0.5, 1.5, 2.5, 3.5, 6.5, 7.5, 8.5, 9.5, 10.5, 11.5, 14.5, 15.5], 45: [5.0, 13.0], 48.0: [4.5, 5.5, 12.5, 13.5]}
var bass_dur_17 = 0.4
var bass_instrument_18 = 34
var bass_times_18 = {36: [0.0], 40: [1.0], 41: [12.0], 43: [2.0, 4.0], 45: [8.0, 13.0], 47.0: [5.0], 48.0: [3.0, 9.0, 14.0], 50.0: [6.0], 52.0: [10.0], 53.0: [15.0], 55.0: [7.0], 57.0: [11.0]}
var bass_dur_18 = 0.9
var bass_instrument_19 = 34
var bass_times_19 = {36: [0.0, 8.0], 40: [0.5, 8.5], 41: [6.0, 14.0], 43: [1.0, 2.0, 9.0, 10.0], 45: [4.0, 6.5, 12.0, 14.5], 47.0: [2.5, 10.5], 48.0: [1.5, 4.5, 7.0, 9.5, 12.5, 15.0], 50.0: [3.0, 11.0], 52.0: [5.0, 13.0], 53.0: [7.5, 15.5], 55.0: [3.5, 11.5], 57.0: [5.5, 13.5]}
var bass_dur_19 = 0.4
var bass_instrument_20 = 34
var bass_times_20 = {36: [0.0], 40: [2.0], 41: [12.0], 43: [3.0, 4.0], 45: [8.0, 14.0], 47.0: [6.0], 48.0: [1.0, 10.0, 15.0], 50.0: [7.0], 52.0: [11.0], 53.0: [13.0], 55.0: [5.0], 57.0: [9.0]}
var bass_dur_20 = 0.9
var bass_instrument_21 = 34
var bass_times_21 = {36: [0.0, 8.0], 40: [1.0, 9.0], 41: [6.0, 14.0], 43: [1.5, 2.0, 9.5, 10.0], 45: [4.0, 7.0, 12.0, 15.0], 47.0: [3.0, 11.0], 48.0: [0.5, 5.0, 7.5, 8.5, 13.0, 15.5], 50.0: [3.5, 11.5], 52.0: [5.5, 13.5], 53.0: [6.5, 14.5], 55.0: [2.5, 10.5], 57.0: [4.5, 12.5]}
var bass_dur_21 = 0.4
var bass_instrument_22 = 34
var bass_times_22 = {36: [0.0], 40: [2.0], 41: [12.0], 43: [1.0, 3.0, 4.0], 45: [8.0, 14.0], 47.0: [6.0], 48.0: [10.0, 13.0, 15.0], 50.0: [5.0, 7.0], 52.0: [9.0, 11.0]}
var bass_dur_22 = 0.9
var bass_instrument_23 = 34
var bass_times_23 = {36: [0.0, 8.0], 40: [1.0, 9.0], 41: [6.0, 14.0], 43: [0.5, 1.5, 2.0, 8.5, 9.5, 10.0], 45: [4.0, 7.0, 12.0, 15.0], 47.0: [3.0, 11.0], 48.0: [5.0, 6.5, 7.5, 13.0, 14.5, 15.5], 50.0: [2.5, 3.5, 10.5, 11.5], 52.0: [4.5, 5.5, 12.5, 13.5]}
var bass_dur_23 = 0.4
var bass_instrument_24 = 34
var bass_times_24 = {36: [12.0], 40: [13.0], 41: [4.0], 43: [8.0, 14.0], 45: [0.0, 5.0], 47.0: [9.0], 48.0: [1.0, 6.0, 15.0], 50.0: [10.0], 52.0: [2.0], 53.0: [7.0], 55.0: [11.0], 57.0: [3.0]}
var bass_dur_24 = 0.9
var bass_instrument_25 = 34
var bass_times_25 = {36: [6.0, 14.0], 40: [6.5, 14.5], 41: [2.0, 10.0], 43: [4.0, 7.0, 12.0, 15.0], 45: [0.0, 2.5, 8.0, 10.5], 47.0: [4.5, 12.5], 48.0: [0.5, 3.0, 7.5, 8.5, 11.0, 15.5], 50.0: [5.0, 13.0], 52.0: [1.0, 9.0], 53.0: [3.5, 11.5], 55.0: [5.5, 13.5], 57.0: [1.5, 9.5]}
var bass_dur_25 = 0.4
var bass_instrument_26 = 34
var bass_times_26 = {36: [12.0], 40: [14.0], 41: [4.0], 43: [8.0, 15.0], 45: [0.0, 6.0], 47.0: [10.0], 48.0: [2.0, 7.0, 13.0], 50.0: [11.0], 52.0: [3.0], 53.0: [5.0], 55.0: [9.0], 57.0: [1.0]}
var bass_dur_26 = 0.9
var bass_instrument_27 = 34
var bass_times_27 = {36: [6.0, 14.0], 40: [7.0, 15.0], 41: [2.0, 10.0], 43: [4.0, 7.5, 12.0, 15.5], 45: [0.0, 3.0, 8.0, 11.0], 47.0: [5.0, 13.0], 48.0: [1.0, 3.5, 6.5, 9.0, 11.5, 14.5], 50.0: [5.5, 13.5], 52.0: [1.5, 9.5], 53.0: [2.5, 10.5], 55.0: [4.5, 12.5], 57.0: [0.5, 8.5]}
var bass_dur_27 = 0.4
var bass_instrument_28 = 34
var bass_times_28 = {36: [12.0], 40: [14.0], 41: [4.0], 43: [8.0, 13.0, 15.0], 45: [0.0, 6.0], 47.0: [10.0], 48.0: [2.0, 5.0, 7.0], 50.0: [9.0, 11.0], 52.0: [1.0, 3.0]}
var bass_dur_28 = 0.9
var bass_instrument_29 = 34
var bass_times_29 = {36: [6.0, 14.0], 40: [7.0, 15.0], 41: [2.0, 10.0], 43: [4.0, 6.5, 7.5, 12.0, 14.5, 15.5], 45: [0.0, 3.0, 8.0, 11.0], 47.0: [5.0, 13.0], 48.0: [1.0, 2.5, 3.5, 9.0, 10.5, 11.5], 50.0: [4.5, 5.5, 12.5, 13.5], 52.0: [0.5, 1.5, 8.5, 9.5]}
var bass_dur_29 = 0.4

/////////////////////////////////////////////////////////
///               PERCUSSION SELECTION                ///
/////////////////////////////////////////////////////////

var percussion_instrument_0 = 117
var percussion_times_0 = {50: [0.0, 1.0, 1.5, 2.25, 2.5, 3.0, 3.5, 4.0, 5.0, 5.5, 6.25, 6.5, 7.0, 7.5, 8.0, 9.0, 9.5, 10.25, 10.5, 11.0, 11.5, 12.0, 13.0, 13.5, 14.25, 14.5, 15.0, 15.5]}
var percussion_dur_0 = 0.15
var percussion_instrument_1 = 118
var percussion_times_1 = {50: [0.0, 1.0, 1.5, 2.25, 2.5, 3.0, 3.5, 4.0, 5.0, 5.5, 6.25, 6.5, 7.0, 7.5, 8.0, 9.0, 9.5, 10.25, 10.5, 11.0, 11.5, 12.0, 13.0, 13.5, 14.25, 14.5, 15.0, 15.5]}
var percussion_dur_1 = 0.15
var percussion_instrument_2 = 119
var percussion_times_2 = {50: [0.0, 1.0, 1.5, 2.25, 2.5, 3.0, 3.5, 4.0, 5.0, 5.5, 6.25, 6.5, 7.0, 7.5, 8.0, 9.0, 9.5, 10.25, 10.5, 11.0, 11.5, 12.0, 13.0, 13.5, 14.25, 14.5, 15.0, 15.5]}
var percussion_dur_2 = 0.15
var percussion_instrument_3 = 117
var percussion_times_3 = {50: [0.0, 1.5, 2.0, 2.5, 3.5, 4.0, 5.5, 6.0, 6.5, 7.5, 8.0, 9.5, 10.0, 10.5, 11.5, 12.0, 13.5, 14.0, 14.5, 15.5]}
var percussion_dur_3 = 0.4
var percussion_instrument_4 = 118
var percussion_times_4 = {50: [0.0, 1.5, 2.0, 2.5, 3.5, 4.0, 5.5, 6.0, 6.5, 7.5, 8.0, 9.5, 10.0, 10.5, 11.5, 12.0, 13.5, 14.0, 14.5, 15.5]}
var percussion_dur_4 = 0.4
var percussion_instrument_5 = 119
var percussion_times_5 = {50: [0.0, 1.5, 2.0, 2.5, 3.5, 4.0, 5.5, 6.0, 6.5, 7.5, 8.0, 9.5, 10.0, 10.5, 11.5, 12.0, 13.5, 14.0, 14.5, 15.5]}
var percussion_dur_5 = 0.4
var percussion_instrument_6 = 117
var percussion_times_6 = {50: [0.0, 2.5, 4.0, 6.5, 8.0, 10.5, 12.0, 14.5]}
var percussion_dur_6 = 0.4
var percussion_instrument_7 = 118
var percussion_times_7 = {50: [0.0, 2.5, 4.0, 6.5, 8.0, 10.5, 12.0, 14.5]}
var percussion_dur_7 = 0.4
var percussion_instrument_8 = 119
var percussion_times_8 = {50: [0.0, 2.5, 4.0, 6.5, 8.0, 10.5, 12.0, 14.5]}
var percussion_dur_8 = 0.4
var percussion_instrument_9 = 117
var percussion_times_9 = {50: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0]}
var percussion_dur_9 = 0.4
var percussion_instrument_10 = 118
var percussion_times_10 = {50: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0]}
var percussion_dur_10 = 0.4
var percussion_instrument_11 = 119
var percussion_times_11 = {50: [0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0]}
var percussion_dur_11 = 0.4
var percussion_instrument_12 = 117
var percussion_times_12 = {50: [0.0, 0.25, 0.5, 0.75, 1.0, 1.25, 1.5, 1.75, 2.0, 2.25, 2.5, 2.75, 3.0, 3.25, 3.5, 3.75, 4.0, 4.25, 4.5, 4.75, 5.0, 5.25, 5.5, 5.75, 6.0, 6.25, 6.5, 6.75, 7.0, 7.25, 7.5, 7.75, 8.0, 8.25, 8.5, 8.75, 9.0, 9.25, 9.5, 9.75, 10.0, 10.25, 10.5, 10.75, 11.0, 11.25, 11.5, 11.75, 12.0, 12.25, 12.5, 12.75, 13.0, 13.25, 13.5, 13.75, 14.0, 14.25, 14.5, 14.75, 15.0, 15.25, 15.5, 15.75]}
var percussion_dur_12 = 0.4
var percussion_instrument_13 = 118
var percussion_times_13 = {50: [0.0, 0.25, 0.5, 0.75, 1.0, 1.25, 1.5, 1.75, 2.0, 2.25, 2.5, 2.75, 3.0, 3.25, 3.5, 3.75, 4.0, 4.25, 4.5, 4.75, 5.0, 5.25, 5.5, 5.75, 6.0, 6.25, 6.5, 6.75, 7.0, 7.25, 7.5, 7.75, 8.0, 8.25, 8.5, 8.75, 9.0, 9.25, 9.5, 9.75, 10.0, 10.25, 10.5, 10.75, 11.0, 11.25, 11.5, 11.75, 12.0, 12.25, 12.5, 12.75, 13.0, 13.25, 13.5, 13.75, 14.0, 14.25, 14.5, 14.75, 15.0, 15.25, 15.5, 15.75]}
var percussion_dur_13 = 0.4
var percussion_instrument_14 = 119
var percussion_times_14 = {50: [0.0, 0.25, 0.5, 0.75, 1.0, 1.25, 1.5, 1.75, 2.0, 2.25, 2.5, 2.75, 3.0, 3.25, 3.5, 3.75, 4.0, 4.25, 4.5, 4.75, 5.0, 5.25, 5.5, 5.75, 6.0, 6.25, 6.5, 6.75, 7.0, 7.25, 7.5, 7.75, 8.0, 8.25, 8.5, 8.75, 9.0, 9.25, 9.5, 9.75, 10.0, 10.25, 10.5, 10.75, 11.0, 11.25, 11.5, 11.75, 12.0, 12.25, 12.5, 12.75, 13.0, 13.25, 13.5, 13.75, 14.0, 14.25, 14.5, 14.75, 15.0, 15.25, 15.5, 15.75]}
var percussion_dur_14 = 0.4
var percussion_instrument_15 = 117
var percussion_times_15 = {50: [0.0, 1.5, 2.0, 3.5, 4.0, 5.5, 6.0, 7.5, 8.0, 9.5, 10.0, 11.5, 12.0, 13.5, 14.0, 15.5]}
var percussion_dur_15 = 0.4
var percussion_instrument_16 = 118
var percussion_times_16 = {50: [0.0, 1.5, 2.0, 3.5, 4.0, 5.5, 6.0, 7.5, 8.0, 9.5, 10.0, 11.5, 12.0, 13.5, 14.0, 15.5]}
var percussion_dur_16 = 0.4
var percussion_instrument_17 = 119
var percussion_times_17 = {50: [0.0, 1.5, 2.0, 3.5, 4.0, 5.5, 6.0, 7.5, 8.0, 9.5, 10.0, 11.5, 12.0, 13.5, 14.0, 15.5]}
var percussion_dur_17 = 0.4
var percussion_instrument_18 = 117
var percussion_times_18 = {50: [0.5, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 9.5, 10.5, 11.5, 12.5, 13.5, 14.5, 15.5]}
var percussion_dur_18 = 0.4
var percussion_instrument_19 = 118
var percussion_times_19 = {50: [0.5, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 9.5, 10.5, 11.5, 12.5, 13.5, 14.5, 15.5]}
var percussion_dur_19 = 0.4
var percussion_instrument_20 = 119
var percussion_times_20 = {50: [0.5, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 9.5, 10.5, 11.5, 12.5, 13.5, 14.5, 15.5]}
var percussion_dur_20 = 0.4

// name, instrument, notesequence, notelength
function createMusicLines(cb) {
    async.parallel([
        function(callback) {
          bassLineCreate('bass 1', bass_instrument_0, bass_times_0, bass_dur_0, callback);
        },
        function(callback) {
          bassLineCreate('bass 2', bass_instrument_1, bass_times_1, bass_dur_1, callback);
        },
        function(callback) {
          bassLineCreate('bass 3', bass_instrument_2, bass_times_2, bass_dur_2, callback);
        },
        function(callback) {
          bassLineCreate('bass 4', bass_instrument_3, bass_times_3, bass_dur_3, callback);
        },
        function(callback) {
          bassLineCreate('bass 5', bass_instrument_4, bass_times_4, bass_dur_4, callback);
        },
        function(callback) {
          bassLineCreate('bass 6', bass_instrument_5, bass_times_5, bass_dur_5, callback);
        },
        function(callback) {
          bassLineCreate('bass 7', bass_instrument_6, bass_times_6, bass_dur_6, callback);
        },
        function(callback) {
          bassLineCreate('bass 8', bass_instrument_7, bass_times_7, bass_dur_7, callback);
        },
        function(callback) {
          bassLineCreate('bass 9', bass_instrument_8, bass_times_8, bass_dur_8, callback);
        },
        function(callback) {
          bassLineCreate('bass 10', bass_instrument_9, bass_times_9, bass_dur_9, callback);
        },
        function(callback) {
          bassLineCreate('bass 11', bass_instrument_10, bass_times_10, bass_dur_10, callback);
        },
        function(callback) {
          bassLineCreate('bass 12', bass_instrument_11, bass_times_11, bass_dur_11, callback);
        },
        function(callback) {
          bassLineCreate('bass 13', bass_instrument_12, bass_times_12, bass_dur_12, callback);
        },
        function(callback) {
          bassLineCreate('bass 14', bass_instrument_13, bass_times_13, bass_dur_13, callback);
        },
        function(callback) {
          bassLineCreate('bass 15', bass_instrument_14, bass_times_14, bass_dur_14, callback);
        },
        function(callback) {
          bassLineCreate('bass 16', bass_instrument_15, bass_times_15, bass_dur_15, callback);
        },
        function(callback) {
          bassLineCreate('bass 17', bass_instrument_16, bass_times_16, bass_dur_16, callback);
        },
        function(callback) {
          bassLineCreate('bass 18', bass_instrument_17, bass_times_17, bass_dur_17, callback);
        },
        function(callback) {
          bassLineCreate('bass 19', bass_instrument_18, bass_times_18, bass_dur_18, callback);
        },
        function(callback) {
          bassLineCreate('bass 20', bass_instrument_19, bass_times_19, bass_dur_19, callback);
        },
        function(callback) {
          bassLineCreate('bass 21', bass_instrument_20, bass_times_20, bass_dur_20, callback);
        },
        function(callback) {
          bassLineCreate('bass 22', bass_instrument_21, bass_times_21, bass_dur_21, callback);
        },
        function(callback) {
          bassLineCreate('bass 23', bass_instrument_22, bass_times_22, bass_dur_22, callback);
        },
        function(callback) {
          bassLineCreate('bass 24', bass_instrument_23, bass_times_23, bass_dur_23, callback);
        },
        function(callback) {
          bassLineCreate('bass 25', bass_instrument_24, bass_times_24, bass_dur_24, callback);
        },
        function(callback) {
          bassLineCreate('bass 26', bass_instrument_25, bass_times_25, bass_dur_25, callback);
        },
        function(callback) {
          bassLineCreate('bass 27', bass_instrument_26, bass_times_26, bass_dur_26, callback);
        },
        function(callback) {
          bassLineCreate('bass 28', bass_instrument_27, bass_times_27, bass_dur_27, callback);
        },
        function(callback) {
          bassLineCreate('bass 29', bass_instrument_28, bass_times_28, bass_dur_28, callback);
        },
        function(callback) {
          bassLineCreate('bass 30', bass_instrument_29, bass_times_29, bass_dur_29, callback);
        },
        function(callback) {
          melodyLineCreate('melody 1', raw_melody_lines[0], callback);
        },
        function(callback) {
          melodyLineCreate('melody 2', raw_melody_lines[1], callback);
        },
        function(callback) {
          melodyLineCreate('melody 3', raw_melody_lines[2], callback);
        },
        function(callback) {
          melodyLineCreate('melody 4', raw_melody_lines[3], callback);
        },
        function(callback) {
          melodyLineCreate('melody 5', raw_melody_lines[4], callback);
        },
        function(callback) {
          melodyLineCreate('melody 6', raw_melody_lines[5], callback);
        },
        function(callback) {
          melodyLineCreate('melody 7', raw_melody_lines[6], callback);
        },
        function(callback) {
          melodyLineCreate('melody 8', raw_melody_lines[7], callback);
        },
        function(callback) {
          melodyLineCreate('melody 9', raw_melody_lines[8], callback);
        },
        function(callback) {
          melodyLineCreate('melody 10', raw_melody_lines[9], callback);
        },
        function(callback) {
          melodyLineCreate('melody 11', raw_melody_lines[10], callback);
        },
        function(callback) {
          melodyLineCreate('melody 12', raw_melody_lines[11], callback);
        },
        function(callback) {
          melodyLineCreate('melody 13', raw_melody_lines[12], callback);
        },
        function(callback) {
          melodyLineCreate('melody 14', raw_melody_lines[13], callback);
        },
        function(callback) {
          percussionLineCreate('percussion 1', percussion_instrument_0, percussion_times_0, percussion_dur_0, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 2', percussion_instrument_1, percussion_times_1, percussion_dur_1, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 3', percussion_instrument_2, percussion_times_2, percussion_dur_2, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 4', percussion_instrument_3, percussion_times_3, percussion_dur_3, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 5', percussion_instrument_4, percussion_times_4, percussion_dur_4, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 6', percussion_instrument_5, percussion_times_5, percussion_dur_5, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 7', percussion_instrument_6, percussion_times_6, percussion_dur_6, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 8', percussion_instrument_7, percussion_times_7, percussion_dur_7, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 9', percussion_instrument_8, percussion_times_8, percussion_dur_8, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 10', percussion_instrument_9, percussion_times_9, percussion_dur_9, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 11', percussion_instrument_10, percussion_times_10, percussion_dur_10, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 12', percussion_instrument_11, percussion_times_11, percussion_dur_11, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 13', percussion_instrument_12, percussion_times_12, percussion_dur_12, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 14', percussion_instrument_13, percussion_times_13, percussion_dur_13, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 15', percussion_instrument_14, percussion_times_14, percussion_dur_14, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 16', percussion_instrument_15, percussion_times_15, percussion_dur_15, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 17', percussion_instrument_16, percussion_times_16, percussion_dur_16, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 18', percussion_instrument_17, percussion_times_17, percussion_dur_17, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 19', percussion_instrument_18, percussion_times_18, percussion_dur_18, callback);
        },
        function(callback) {
          percussionLineCreate('percussion 20', percussion_instrument_19, percussion_times_19, percussion_dur_19, callback);
        },
        ],
        // optional callback
        cb);
}


function createPlayers(cb) {
    async.series([
        function(callback) {
          playerCreate('Annie', games[0], 0, callback);
        },
        function(callback) {
          playerCreate('Bobbette', games[0], 0, callback);
        },
        function(callback) {
          playerCreate('Celia', games[0], 0, callback);
        },
        function(callback) {
          playerCreate('Doug', games[0], 1, callback);
        },
        function(callback) {
          playerCreate('Emily', games[1], 0, callback);
        },
        function(callback) {
          playerCreate('Farah', games[1], 0, callback);
        },
        function(callback) {
          playerCreate('Giselle', games[1], 0, callback);
        },
        function(callback) {
          playerCreate('Hitch', games[1], 0, callback);
        },
        ],
        // optional callback
        cb);
}

function getRandomLines(lineInventory) {
  var numToSelect = Math.min(lineInventory.length, 3);
  var selectedLines = new Set();

  for(var i=0; i < numToSelect; i++) {
    var item = lineInventory[Math.floor(Math.random()*lineInventory.length)];
    while (selectedLines.has(item)) {
      item = lineInventory[Math.floor(Math.random()*lineInventory.length)];
    }
    selectedLines.add(item);
  }
  return Array.from(selectedLines);
}

function createSubmissions(cb) {
    async.series([
        function(callback) {
          submissionCreate(players[0], [melody_lines[0], melody_lines[1], melody_lines[3]], [bass_lines[1], bass_lines[2], bass_lines[4]], [percussion_lines[0], percussion_lines[1], percussion_lines[2]], melody_lines[0], bass_lines[2], percussion_lines[0], true, 120, callback);
        },
        function(callback) {
          submissionCreate(players[0], getRandomLines(melody_lines), getRandomLines(bass_lines), getRandomLines(percussion_lines), false, false, false, false, false, callback);
        },
        function(callback) {
          submissionCreate(players[1], [melody_lines[2], melody_lines[3], melody_lines[5]], [bass_lines[4], bass_lines[3], bass_lines[2]], [percussion_lines[0], percussion_lines[3], percussion_lines[6]], melody_lines[3], bass_lines[4], percussion_lines[0], true, 120, callback);
        },
        function(callback) {
          submissionCreate(players[1], getRandomLines(melody_lines), getRandomLines(bass_lines), getRandomLines(percussion_lines), false, false, false, false, false, callback);
        },
        function(callback) {
          submissionCreate(players[2], [melody_lines[4], melody_lines[3], melody_lines[2]], [bass_lines[1], bass_lines[2], bass_lines[4]], [percussion_lines[1], percussion_lines[2], percussion_lines[4]], melody_lines[3], bass_lines[4], percussion_lines[0], true, 120, callback);
        },
        function(callback) {
          submissionCreate(players[2], getRandomLines(melody_lines), getRandomLines(bass_lines), getRandomLines(percussion_lines), false, false, false, false, false, callback);
        },
        function(callback) {
          submissionCreate(players[3], [melody_lines[0], melody_lines[1], melody_lines[3]], [bass_lines[1], bass_lines[2], bass_lines[4]], [percussion_lines[0], percussion_lines[1], percussion_lines[2]], melody_lines[1], bass_lines[1], percussion_lines[0], true, 120, callback);
        },
        function(callback) {
          submissionCreate(players[3], getRandomLines(melody_lines), getRandomLines(bass_lines), getRandomLines(percussion_lines), false, false, false, false, false, callback);
        },
        function(callback) {
          submissionCreate(players[4], getRandomLines(melody_lines), getRandomLines(bass_lines), getRandomLines(percussion_lines), false, false, false, false, false, callback);
        },
        function(callback) {
          submissionCreate(players[5], [melody_lines[2], melody_lines[3], melody_lines[5]], [bass_lines[4], bass_lines[3], bass_lines[2]], [percussion_lines[0], percussion_lines[3], percussion_lines[6]], melody_lines[3], bass_lines[4], percussion_lines[0], true, 60, callback);
        },
        function(callback) {
          submissionCreate(players[6], [melody_lines[4], melody_lines[3], melody_lines[2]], [bass_lines[1], bass_lines[2], bass_lines[4]], [percussion_lines[1], percussion_lines[2], percussion_lines[4]], melody_lines[2], bass_lines[4], percussion_lines[1], true, 120, callback);
        },
        function(callback) {
          submissionCreate(players[7], [melody_lines[0], melody_lines[1], melody_lines[3]], [bass_lines[1], bass_lines[2], bass_lines[4]], [percussion_lines[0], percussion_lines[1], percussion_lines[2]], melody_lines[1], bass_lines[1], percussion_lines[2], true, 200, callback);
        },
      ], cb);
}


function createRounds(cb) {
    async.series([
        function(callback) {
          roundCreate(1, 'AbeABOfx82Q', [submissions[0], submissions[2], submissions[4], submissions[6]], submissions[4], players[0], callback);
        },
        function(callback) {
          roundCreate(2, 'xJO7esEF7lo', [submissions[1], submissions[3], submissions[5], submissions[7]], false, players[1], callback);
        },
        function(callback) {
          roundCreate(1, 'AbeABOfx82Q', [submissions[8], submissions[9], submissions[10], submissions[11]], false, players[4], callback);
        }
      ], cb);
}


function createGames(cb) {
    async.series([
      function(callback) {
        gameCreate('Too Cool for School', callback);
      },
      function(callback) {
        gameCreate('All Rounded Up', callback)
      }
    ], cb);
}


function updateGame0(cb) {
  games[0].update({ rounds: [rounds[0], rounds[1]], currentRound: rounds[1] }, function(err, game) {
    if (err) {
      cb(err, null)
      return
    }
    games[0] = game;
    console.log('Update Game: ' + game);
    cb(null, game)
  });
}

function updateGame1(cb) {
  games[1].update({ rounds: [rounds[2]], currentRound: rounds[2] }, function(err, game) {
    if (err) {
        cb(err, null)
        return
    }
    games[1] = game;
    console.log('Update Game: ' + game);
    cb(null, game)
  })
}

async.series([
    createMusicLines,
    createGames,
    createPlayers,
    createSubmissions,
    createRounds,
    updateGame0,
    updateGame1
],
// optional callback
function(err, results) {
    if (err) {
        console.log('FINAL ERR: '+err);
    }
    else {
        console.log('Game Instances: '+games);

    }
    //All done, disconnect from database
    mongoose.connection.close();
});
